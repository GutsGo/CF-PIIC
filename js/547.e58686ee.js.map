{"version":3,"file":"js/547.e58686ee.js","mappings":"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","sources":["webpack://sanyue_imghub/./src/utils/fetchWithAuth.js","webpack://sanyue_imghub/./src/components/DashboardTabs.vue?7c1c","webpack://sanyue_imghub/./src/components/DashboardTabs.vue","webpack://sanyue_imghub/./src/components/DashboardTabs.vue?1414","webpack://sanyue_imghub/./src/views/CustomerConfig.vue?0b1c","webpack://sanyue_imghub/./src/views/CustomerConfig.vue","webpack://sanyue_imghub/./src/views/CustomerConfig.vue?658e"],"sourcesContent":["import store from '@/store'\nimport { ElMessage } from 'element-plus'\nimport router from '@/router'\n\nexport default async function fetchWithAuth(url, options = {}) {\n    // 开发环境下添加 /api 前缀\n    url = process.env.NODE_ENV === 'production' ? url : `/api${url}`;\n\n    const credentials = store.getters.credentials || btoa('unset:unset');\n\n    // 设置 Authorization 头\n    options.headers = {\n        ...options.headers,\n        'Authorization': `Basic ${credentials}`\n    };\n    // 确保包含凭据，如 cookies\n    options.credentials = 'include'; \n\n    const response = await fetch(url, options);\n\n    if (response.status === 401) {\n        // Redirect to the login page if a 401 Unauthorized is returned\n        ElMessage.error('认证状态错误，请重新登录');\n        router.push('/adminLogin'); \n    }\n\n    return response;\n}\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"dashboard-tabs\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  const _component_el_tab_pane = _resolveComponent(\"el-tab-pane\");\n  const _component_el_tabs = _resolveComponent(\"el-tabs\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_tabs, {\n    \"model-value\": $props.activeTab,\n    onTabClick: $options.handleTabClick,\n    class: \"m3-tabs\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_tab_pane, {\n      label: \"Gallery\",\n      name: \"dashboard\"\n    }, {\n      label: _withCtx(() => [_createVNode(_component_font_awesome_icon, {\n        icon: \"images\"\n      }), _cache[0] || (_cache[0] = _createTextVNode(\" Gallery \"))]),\n      _: 1\n    }), _createVNode(_component_el_tab_pane, {\n      label: \"User Management\",\n      name: \"customerConfig\"\n    }, {\n      label: _withCtx(() => [_createVNode(_component_font_awesome_icon, {\n        icon: \"user-cog\"\n      }), _cache[1] || (_cache[1] = _createTextVNode(\" User Management \"))]),\n      _: 1\n    }), _createVNode(_component_el_tab_pane, {\n      label: \"System Settings\",\n      name: \"systemConfig\"\n    }, {\n      label: _withCtx(() => [_createVNode(_component_font_awesome_icon, {\n        icon: \"cogs\"\n      }), _cache[2] || (_cache[2] = _createTextVNode(\" System Settings \"))]),\n      _: 1\n    })]),\n    _: 1\n  }, 8, [\"model-value\", \"onTabClick\"])]);\n}","import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'DashboardTabs',\n  props: {\n    activeTab: {\n      type: String,\n      default: 'dashboard'\n    }\n  },\n  methods: {\n    handleTabClick(tab) {\n      this.$router.push(`/${tab.props.name}`);\n    }\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./DashboardTabs.vue?vue&type=template&id=2908e39a&scoped=true\"\nimport script from \"./DashboardTabs.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardTabs.vue?vue&type=script&lang=js\"\n\nimport \"./DashboardTabs.vue?vue&type=style&index=0&id=2908e39a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2908e39a\"]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"customer-config\"\n};\nconst _hoisted_2 = {\n  class: \"top-app-bar\"\n};\nconst _hoisted_3 = {\n  class: \"actions\"\n};\nconst _hoisted_4 = {\n  class: \"main-content\"\n};\nconst _hoisted_5 = {\n  class: \"expanded-content\"\n};\nconst _hoisted_6 = [\"src\"];\nconst _hoisted_7 = {\n  key: 2,\n  class: \"file-placeholder\"\n};\nconst _hoisted_8 = {\n  class: \"pagination-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_DashboardTabs = _resolveComponent(\"DashboardTabs\");\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\");\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_image = _resolveComponent(\"el-image\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_switch = _resolveComponent(\"el-switch\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", _hoisted_2, [_createVNode(_component_DashboardTabs, {\n    activeTab: \"customerConfig\"\n  }), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_tooltip, {\n    disabled: $options.disableTooltip,\n    content: \"退出登录\",\n    placement: \"bottom\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"button\", {\n      class: \"m3-icon-button\",\n      onClick: _cache[0] || (_cache[0] = (...args) => $options.handleLogout && $options.handleLogout(...args))\n    }, [_createVNode(_component_font_awesome_icon, {\n      icon: \"sign-out-alt\"\n    })])]),\n    _: 1\n  }, 8, [\"disabled\"])])]), _createElementVNode(\"main\", _hoisted_4, [_withDirectives((_openBlock(), _createBlock(_component_el_table, {\n    data: $options.paginatedData,\n    \"default-sort\": {\n      prop: 'count',\n      order: 'descending'\n    },\n    class: \"m3-table\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      type: \"expand\"\n    }, {\n      default: _withCtx(props => [_createElementVNode(\"div\", _hoisted_5, [_cache[1] || (_cache[1] = _createElementVNode(\"h3\", null, \"Uploaded Files\", -1)), _createVNode(_component_el_table, {\n        data: props.row.data,\n        class: \"m3-table nested-table\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_table_column, {\n          prop: \"metadata.FileName\",\n          label: \"File Name\"\n        }), _createVNode(_component_el_table_column, {\n          prop: \"name\",\n          label: \"Preview\"\n        }, {\n          default: _withCtx(({\n            row\n          }) => [row.metadata?.FileType?.includes('image') ? (_openBlock(), _createBlock(_component_el_image, {\n            key: 0,\n            src: '/file/' + row.name + '?from=admin',\n            fit: \"cover\",\n            lazy: \"\",\n            class: \"preview-image\"\n          }, null, 8, [\"src\"])) : row.metadata?.FileType?.includes('video') ? (_openBlock(), _createElementBlock(\"video\", {\n            key: 1,\n            src: '/file/' + row.name + '?from=admin',\n            controls: \"\",\n            class: \"preview-video\"\n          }, null, 8, _hoisted_6)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createVNode(_component_font_awesome_icon, {\n            icon: \"file\",\n            size: \"2x\"\n          })]))]),\n          _: 1\n        }), _createVNode(_component_el_table_column, {\n          prop: \"metadata.TimeStamp\",\n          label: \"Upload Time\",\n          sortable: \"\",\n          formatter: $options.formatTimeStamp\n        }, null, 8, [\"formatter\"])]),\n        _: 2\n      }, 1032, [\"data\"])])]),\n      _: 1\n    }), _createVNode(_component_el_table_column, {\n      prop: \"ip\",\n      label: \"IP Address\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"address\",\n      label: \"Address\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"count\",\n      label: \"Upload Count\",\n      sortable: \"\"\n    }), _createVNode(_component_el_table_column, {\n      label: \"Allowed to Upload\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_el_switch, {\n        modelValue: row.enable,\n        \"onUpdate:modelValue\": $event => row.enable = $event,\n        onChange: $event => $options.handleSwitchEnable(row)\n      }, null, 8, [\"modelValue\", \"onUpdate:modelValue\", \"onChange\"])]),\n      _: 1\n    })]),\n    _: 1\n  }, 8, [\"data\"])), [[_directive_loading, $data.loading]]), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_pagination, {\n    background: \"\",\n    layout: \"prev, pager, next\",\n    total: $data.dealedData.length,\n    \"current-page\": $data.currentPage,\n    \"page-size\": $data.pageSize,\n    onCurrentChange: $options.handlePageChange\n  }, null, 8, [\"total\", \"current-page\", \"page-size\", \"onCurrentChange\"]), $data.currentPage === Math.ceil($data.dealedData.length / $data.pageSize) ? (_openBlock(), _createBlock(_component_el_button, {\n    key: 0,\n    type: \"primary\",\n    onClick: $options.loadMoreData,\n    loading: $data.loading,\n    class: \"load-more\"\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"Load More\")])),\n    _: 1\n  }, 8, [\"onClick\", \"loading\"])) : _createCommentVNode(\"\", true)])])]);\n}","import \"core-js/modules/es.array.push.js\";\nimport fetchWithAuth from '@/utils/fetchWithAuth';\nimport DashboardTabs from '@/components/DashboardTabs.vue';\nexport default {\n  name: 'CustomerConfig',\n  data() {\n    return {\n      tableData: [],\n      dealedData: [],\n      // 根据IP地址处理后的数据，格式为 {ip, count, [data]}\n      blockipList: [],\n      // 禁止上传的IP列表\n\n      loading: false,\n      // 分页数据\n      currentPage: 1,\n      pageSize: 10 // 默认每页10条\n    };\n  },\n  components: {\n    DashboardTabs\n  },\n  computed: {\n    disableTooltip() {\n      return window.innerWidth < 768;\n    },\n    paginatedData() {\n      // 计算分页数据\n      const start = (this.currentPage - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      return this.dealedData.slice(start, end);\n    }\n  },\n  methods: {\n    handleLogout() {\n      this.$store.commit('setCredentials', null);\n      this.$router.push('/adminLogin');\n    },\n    formatTimeStamp(timeStamp) {\n      return new Date(timeStamp).toLocaleString();\n    },\n    sortByTimestamp(a, b) {\n      return new Date(a.metadata.TimeStamp) - new Date(b.metadata.TimeStamp);\n    },\n    async handleSwitchEnable(row) {\n      const ip = row.ip;\n      const enable = row.enable;\n      if (enable) {\n        // 从 blockipList 中移除\n        this.blockipList = this.blockipList.filter(item => item !== ip);\n        // 更新 blockipList\n        await fetchWithAuth(\"/api/manage/cusConfig/whiteip\", {\n          method: 'POST',\n          body: ip\n        });\n      } else {\n        // 添加到 blockipList 中\n        this.blockipList.push(ip);\n        // 更新 blockipList\n        await fetchWithAuth(\"/api/manage/cusConfig/blockip\", {\n          method: 'POST',\n          body: ip\n        });\n      }\n    },\n    handlePageChange(page) {\n      this.currentPage = page;\n      // 到最后一页时，加载更多数据\n      if (page === Math.ceil(this.dealedData.length / this.pageSize)) {\n        this.loadMoreData();\n      }\n    },\n    loadMoreData() {\n      this.loading = true;\n      const start = this.dealedData.length;\n      const count = 20; // 每次加载20条数据\n      fetchWithAuth(`/api/manage/cusConfig/list?start=${start}&count=${count}`, {\n        method: 'GET'\n      }).then(response => response.json()).then(result => {\n        this.dealedData = this.dealedData.concat(result.map(item => {\n          const enable = !this.blockipList.includes(item.ip);\n          return {\n            ip: item.ip,\n            address: item.address,\n            count: item.count,\n            data: item.data,\n            enable: enable\n          };\n        }));\n      }).catch(() => {\n        this.$message.error('加载更多数据时出错，请检查网络连接');\n      }).finally(() => {\n        this.loading = false;\n      });\n    },\n    handleSizeChange(size) {\n      this.pageSize = size;\n      this.currentPage = 1;\n    }\n  },\n  mounted() {\n    this.loading = true;\n    fetchWithAuth(\"/api/manage/check\", {\n      method: 'GET'\n    }).then(response => response.text()).then(result => {\n      if (result == \"true\") {\n        this.showLogoutButton = true;\n        // 在 check 成功后再执行 list 的 fetch 请求\n        return fetchWithAuth(\"/api/manage/cusConfig/list?count=20\", {\n          method: 'GET'\n        });\n      } else if (result == \"Not using basic auth.\") {\n        return fetchWithAuth(\"/api/manage/cusConfig/list?count=20\", {\n          method: 'GET'\n        });\n      } else {\n        throw new Error('Unauthorized');\n      }\n    }).then(response => response.json()).then(async result => {\n      // 读取blockipList, 接口返回格式为 'ip1,ip2,ip3'，需要转换为数组\n      const blockipList = await fetchWithAuth(\"/api/manage/cusConfig/blockipList\", {\n        method: 'GET'\n      });\n      this.blockipList = (await blockipList.text()).split(',');\n      this.dealedData = result.map(item => {\n        const enable = !this.blockipList.includes(item.ip);\n        return {\n          ip: item.ip,\n          address: item.address,\n          count: item.count,\n          data: item.data,\n          enable: enable\n        };\n      });\n    }).catch(err => {\n      if (err.message !== 'Unauthorized') {\n        this.$message.error('同步数据时出错，请检查网络连接');\n      }\n    }).finally(() => {\n      this.loading = false;\n    });\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./CustomerConfig.vue?vue&type=template&id=e8f4e810&scoped=true\"\nimport script from \"./CustomerConfig.vue?vue&type=script&lang=js\"\nexport * from \"./CustomerConfig.vue?vue&type=script&lang=js\"\n\nimport \"./CustomerConfig.vue?vue&type=style&index=0&id=e8f4e810&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e8f4e810\"]])\n\nexport default __exports__"],"names":["async","fetchWithAuth","url","options","credentials","store","getters","btoa","headers","response","fetch","status","ElMessage","error","router","push","_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_font_awesome_icon","_component_el_tab_pane","_component_el_tabs","activeTab","onTabClick","handleTabClick","default","label","name","icon","_","props","type","String","methods","tab","this","$router","__exports__","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","key","_hoisted_8","_component_DashboardTabs","_component_el_tooltip","_component_el_table_column","_component_el_image","_component_el_table","_component_el_switch","_component_el_pagination","_component_el_button","_directive_loading","disabled","disableTooltip","content","placement","onClick","args","handleLogout","data","paginatedData","prop","order","row","metadata","FileType","includes","src","fit","lazy","controls","size","sortable","formatter","formatTimeStamp","modelValue","enable","$event","onChange","handleSwitchEnable","loading","background","layout","total","dealedData","length","currentPage","pageSize","onCurrentChange","handlePageChange","Math","ceil","loadMoreData","tableData","blockipList","components","DashboardTabs","computed","window","innerWidth","start","end","slice","$store","commit","timeStamp","Date","toLocaleString","sortByTimestamp","a","b","TimeStamp","ip","filter","item","method","body","page","count","then","json","result","concat","map","address","catch","$message","finally","handleSizeChange","mounted","text","showLogoutButton","Error","split","err","message"],"sourceRoot":""}