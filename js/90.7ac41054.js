"use strict";(self["webpackChunksanyue_imghub"]=self["webpackChunksanyue_imghub"]||[]).push([[90],{2092:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var a=s(8755),n=s(443);function i(e,t,s,i,o,r){const l=a.A;return(0,n.uX)(),(0,n.Wv)(l,{title:"管理端登录",fields:o.loginFields,"submit-text":"登录","background-key":"adminLoginBkImg","is-admin":!0,onSubmit:r.handleLogin},null,8,["fields","onSubmit"])}s(1542),s(4871);var o=s(1525),r={data(){return{loginFields:[{key:"username",label:"用户名",placeholder:"请输入用户名",type:"text"},{key:"password",label:"密码",placeholder:"请输入密码",type:"password",showPassword:!0}]}},components:{BaseLogin:a.A},methods:{async handleLogin(e){const{username:t,password:s}=e,a=btoa(`${t}:${s}`);try{const e=await o.A.get("/api/manage/check",{headers:{Authorization:`Basic ${a}`},withCredentials:!0});200===e.status&&(this.$store.commit("setCredentials",a),this.$router.push("/dashboard"))}catch(n){n.response&&401===n.response.status?this.$message.error("用户名或密码错误"):this.$message.error("服务器错误")}}}},l=s(3928);const d=(0,l.A)(r,[["render",i]]);var u=d},8755:function(e,t,s){s.d(t,{A:function(){return k}});var a=s(9518),n=s(2144),i=(s(8660),s(4403),s(5763)),o=(s(9182),s(62)),r=s(443),l=s(514),d=s(8006);const u={class:"login"},c={class:"login-container m3-elevation-2"},m={class:"login-title"};function h(e,t,s,h,p,g){const y=o.A,b=i.WK,f=n.S2,k=a.A;return(0,r.uX)(),(0,r.CE)("div",u,[(0,r.bF)(y,{class:"toggle-dark"}),(0,r.Lk)("div",c,[(0,r.Lk)("h1",m,(0,l.v_)(s.title),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.fields,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.key,class:"input-container"},[(0,r.bF)(b,{modelValue:p.formData[e.key],"onUpdate:modelValue":t=>p.formData[e.key]=t,placeholder:e.label,type:e.type||"text","show-password":e.showPassword,class:"m3-input",onKeyup:(0,d.jR)(g.handleSubmit,["enter","native"])},null,8,["modelValue","onUpdate:modelValue","placeholder","type","show-password","onKeyup"])]))),128)),(0,r.bF)(f,{class:"submit-button",type:"primary",onClick:g.handleSubmit},{default:(0,r.k6)(()=>[(0,r.eW)((0,l.v_)(s.submitText),1)]),_:1},8,["onClick"])]),(0,r.bF)(k,{class:"footer"})])}s(9243),s(6328);var p=s(3151),g=s(2068),y={name:"BaseLogin",mixins:[g.A],props:{title:{type:String,required:!0},fields:{type:Array,required:!0},submitText:{type:String,default:"登录"},backgroundKey:{type:String,required:!0},isAdmin:{type:Boolean,default:!1}},data(){return{formData:{}}},computed:{...(0,p.L8)(["userConfig"])},components:{Footer:a.A,ToggleDark:o.A},mounted(){this.initFormData(),this.initializeBackground(this.backgroundKey,".login",!this.isAdmin,!0)},methods:{initFormData(){const e={};this.fields.forEach(t=>{e[t.key]=""}),this.formData=e},handleSubmit(){this.$emit("submit",{...this.formData})}}},b=s(3928);const f=(0,b.A)(y,[["render",h],["__scopeId","data-v-deb7d200"]]);var k=f}}]);
//# sourceMappingURL=90.7ac41054.js.map