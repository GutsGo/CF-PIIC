"use strict";(self["webpackChunksanyue_imghub"]=self["webpackChunksanyue_imghub"]||[]).push([[491],{8755:function(e,t,n){n.d(t,{A:function(){return k}});var s=n(9518),i=n(2144),o=(n(8660),n(4403),n(5763)),a=(n(9182),n(62)),r=n(443),l=n(514),u=n(8006);const d={class:"login"},m={class:"login-container m3-elevation-2"},c={class:"login-title"};function h(e,t,n,h,p,g){const f=a.A,y=o.WK,b=i.S2,k=s.A;return(0,r.uX)(),(0,r.CE)("div",d,[(0,r.bF)(f,{class:"toggle-dark"}),(0,r.Lk)("div",m,[(0,r.Lk)("h1",c,(0,l.v_)(n.title),1),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.fields,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.key,class:"input-container"},[(0,r.bF)(y,{modelValue:p.formData[e.key],"onUpdate:modelValue":t=>p.formData[e.key]=t,placeholder:e.label,type:e.type||"text","show-password":e.showPassword,class:"m3-input",onKeyup:(0,u.jR)(g.handleSubmit,["enter","native"])},null,8,["modelValue","onUpdate:modelValue","placeholder","type","show-password","onKeyup"])]))),128)),(0,r.bF)(b,{class:"submit-button",type:"primary",onClick:g.handleSubmit},{default:(0,r.k6)(()=>[(0,r.eW)((0,l.v_)(n.submitText),1)]),_:1},8,["onClick"])]),(0,r.bF)(k,{class:"footer"})])}n(9243),n(6328);var p=n(3151),g=n(2068),f={name:"BaseLogin",mixins:[g.A],props:{title:{type:String,required:!0},fields:{type:Array,required:!0},submitText:{type:String,default:"登录"},backgroundKey:{type:String,required:!0},isAdmin:{type:Boolean,default:!1}},data(){return{formData:{}}},computed:{...(0,p.L8)(["userConfig"])},components:{Footer:s.A,ToggleDark:a.A},mounted(){this.initFormData(),this.initializeBackground(this.backgroundKey,".login",!this.isAdmin,!0)},methods:{initFormData(){const e={};this.fields.forEach(t=>{e[t.key]=""}),this.formData=e},handleSubmit(){this.$emit("submit",{...this.formData})}}},y=n(3928);const b=(0,y.A)(f,[["render",h],["__scopeId","data-v-deb7d200"]]);var k=b},9961:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var s=n(8755),i=n(443);function o(e,t,n,o,a,r){const l=s.A;return(0,i.uX)(),(0,i.Wv)(l,{title:r.loginTitle,fields:a.loginFields,"submit-text":"登录","background-key":"loginBkImg","is-admin":!1,onSubmit:r.handleLogin},null,8,["title","fields","onSubmit"])}n(1542);var a=n(3295),r=n.n(a),l=n(1525),u=n(3151),d={data(){return{loginFields:[{key:"password",label:"密码",placeholder:"请输入认证码",type:"password",showPassword:!0}]}},computed:{...(0,u.L8)(["userConfig"]),ownerName(){return this.userConfig?.ownerName||"Sanyue"},loginTitle(){return`登录到 ${this.ownerName} 图床`}},components:{BaseLogin:s.A},methods:{handleLogin(e){const{password:t}=e,n=""===t?"unset":t;l.A.post("/api/login",{authCode:t}).then(e=>{200===e.status?(r().set("authCode",n,"14d"),this.$router.push("/"),this.$message.success("登录成功")):this.$message.error("登录失败，请检查密码是否正确")}).catch(e=>{this.$message.error("登录失败，请检查密码是否正确")})}}},m=n(3928);const c=(0,m.A)(d,[["render",o]]);var h=c}}]);
//# sourceMappingURL=491.c932ad2c.js.map